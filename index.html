<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–ê–ì–ê–ó–ò–ù –í–¢–®–ï–ö</title>
    <style>
        :root {
            --dark-bg: #080808;
            --slot-bg: #121212;
            --slot-border: #332e2a;
            --gold: #887241;
            --muted-gold: #7a6a4a;
            --text: #b0b0b0;
            --overlay: rgba(0, 0, 0, 0.9);
        }

        body {
            background: var(--dark-bg);
            color: var(--text);
            font-family: Georgia, serif;
            margin: 0;
            padding: 10px;
        }

        .container { max-width: 1200px; margin: 0 auto; }

        .sticky-header {
            position: sticky; top: 0; z-index: 100;
            background: rgba(8,8,8,0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--gold);
            padding: 8px 15px; margin-bottom: 15px;
            display: flex; justify-content: space-between; align-items: center;
        }

        .total-info { font-size: 1em; color: var(--gold); text-transform: uppercase; }
        .total-info span { color: #fff; text-shadow: 0 0 10px var(--gold); }

        .btn-action {
            background: rgba(194,163,93,0.1);
            border: 1px solid var(--muted-gold);
            color: var(--gold);
            padding: 5px 12px;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 0.7em;
            margin-left: 5px;
            transition: 0.2s;
        }

        .btn-action:hover { background: var(--gold); color: #000; }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 8px;
        }

        .item-slot {
            background: var(--slot-bg);
            border: 1px solid var(--slot-border);
            display: flex; flex-direction: column;
        }

        .item-image-container {
            aspect-ratio: 1.3/1;
            background: #000;
            display: flex; align-items: center; justify-content: center;
            position: relative; overflow: hidden;
        }

        .item-image-container img { max-width: 100%; max-height: 100%; object-fit: cover; }
        .img-fallback { position: absolute; font-size: 1.5em; opacity: 0.1; color: var(--gold); }

        .item-details { padding: 5px; text-align: center; }
        .item-title { font-size: 0.7em; color: #eee; height: 2.2em; line-height: 1.1; display: flex; align-items: center; justify-content: center; }
        .item-price { font-size: 0.65em; color: var(--muted-gold); margin-bottom: 5px; }

        .item-input-group { border-top: 1px solid #222; padding-top: 5px; }
        input[type="number"] { width: 85%; background: #000; border: 1px solid var(--muted-gold); color: var(--gold); text-align: center; padding: 1px; font-size: 0.85em; }
        .subtotal-tag { font-size: 0.7em; margin-top: 2px; color: var(--gold); font-weight: bold; }

        #orderModal {
            display: none;
            position: fixed; z-index: 2000; inset: 0;
            background: var(--overlay);
            justify-content: center; align-items: center;
        }

        .modal-content {
            background: #151515;
            border: 2px solid var(--gold);
            padding: 25px;
            width: 90%; max-width: 500px;
            border-radius: 8px;
        }

        .preview-label {
            font-size: 0.85em;
            color: var(--gold);
            text-transform: uppercase;
            margin: 18px 0 6px;
            letter-spacing: 0.5px;
        }

        .preview-block {
            background: rgba(0,0,0,0.4);
            padding: 10px 12px;
            border: 1px solid var(--muted-gold);
            border-radius: 6px;
            font-size: 0.9em;
            white-space: pre-wrap;
            color: var(--text);
            max-height: 180px;
            overflow-y: auto;
        }

        .total-block {
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            color: var(--gold);
            border-radius: 8px;
            margin-top: 20px;
        }

        .form-group select, .form-group textarea {
            width: 100%; background: #000; border: 1px solid var(--slot-border);
            color: #fff; padding: 8px; box-sizing: border-box;
            font-family: serif; border-radius: 4px;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="sticky-header">
        <div class="total-info">–°—É–º–º–∞: <span id="grandTotal">0</span> <small>–∫—Ä–æ–ª—å</small></div>
        <div>
            <button class="btn-action" onclick="openModal()">–ó–∞–ø–æ–ª–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
            <button class="btn-action" onclick="resetAll()">–°–±—Ä–æ—Å</button>
        </div>
    </div>

    <div class="inventory-grid" id="mainGrid"></div>
</div>

<div id="orderModal">
    <div class="modal-content">
        <h2 style="color:var(--gold);text-align:center;font-size:1.2em;margin-top:0;">–î–ï–¢–ê–õ–ò –°–î–ï–õ–ö–ò</h2>
        
        <label class="preview-label">–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</label>
        <div class="form-group">
            <select id="orderMethod">
                <option value="–ù–∞ –ª–æ–∫–∞—Ü–∏–∏-–º–µ—Ç—Ä–æ">–ù–∞ –ª–æ–∫–∞—Ü–∏–∏-–º–µ—Ç—Ä–æ</option>
                <option value="–°–∞–Ω—Ç–∞-–ú—É–µ—Ä—Ç–µ">–°–∞–Ω—Ç–∞-–ú—É–µ—Ä—Ç–µ</option>
                <option value="–ü–µ—Ä–µ–ø–∏—Å—å">–ü–µ—Ä–µ–ø–∏—Å—å</option>
            </select>
        </div>

        <label class="preview-label">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</label>
        <div class="form-group">
            <textarea id="orderNote" rows="3" placeholder="–ö–∞–∫–∏–µ-–ª–∏–±–æ —É—Ç–æ—á–Ω–µ–Ω–∏—è..."></textarea>
        </div>

        <label class="preview-label">–¢–æ–≤–∞—Ä—ã</label>
        <div class="preview-block" id="itemsPreview">‚Äî</div>

        <div class="total-block" id="totalPreview">–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: 0 –∫—Ä–æ–ª—å</div>

        <div style="display:flex;justify-content:space-between;margin-top:30px;">
            <button class="btn-action" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn-action" style="background:var(--gold);color:#000;" onclick="copyTemplate()">–°–ö–û–ü–ò–†–û–í–ê–¢–¨ –®–ê–ë–õ–û–ù</button>
        </div>
    </div>
</div>

<script>
    const items = [
        {name:"–§–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ñ–æ–Ω–∞—Ä—å",price:40},{name:"–¢—ë–º–Ω—ã–π –ª—ë–¥",price:40},{name:"–¢—ë–º–Ω—ã–π –≥—Ä–∏–º—É–∞—Ä",price:40},
        {name:"–ü–∞–∫ '–ù–∞–±–æ—Ä –¢—å–º—ã'",price:100},{name:"–§–æ–Ω–∞—Ä—å –õ–∏—á–∞",price:40},{name:"–ö–∏–Ω–∂–∞–ª –õ–∏—á–∞",price:40},
        {name:"–ì—Ä–∏–º—É–∞—Ä –õ–∏—á–∞",price:40},{name:"–ü–∞–∫ '–ù–∞–±–æ—Ä –õ–∏—á–∞'",price:100},{name:"–î–∞–π—Å –±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫—Ä–∏—Ç–∞",price:70},
        {name:"–î–∞–π—Å –µ–¥–∏–Ω–∏—Ü",price:70},{name:"–î–∞–π—Å –±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç—Ä–æ–ª–ª—è",price:50},{name:"–ë–æ–±—Ä—ë–Ω–æ–∫",price:35},
        {name:"–ö—É—Å–∞—á–∫–∞ –æ–ø–æ—Å—Å—É–º",price:35},{name:"–õ—é–±–æ–ø—ã—Ç–Ω—ã–π –≤–æ—Ä–æ–±—É—à–µ–∫",price:35},{name:"–ü—è—Ç–Ω–∏—Å—Ç—ã–π –±–∞—Ä–∞—à–µ–∫ –õ–∞–≤–∞–Ω–¥–∞",price:35},
        {name:"–ì–æ–ª–æ–¥–Ω–∞—è –º–∞–ª—è–≤–∫–∞",price:35},{name:"–ü—Ä–æ–∫–∞–∑–Ω–∏–∫",price:35},{name:"–†–∞–∑–±–∏—Ç—ã–π –º—Ä–∞–º–æ—Ä–Ω—ã–π –∫–∏–Ω–∂–∞–ª",price:35},
        {name:"–ö–ª–∏–Ω–æ–∫ –ë–µ–ª–æ–π –†–æ–∑—ã",price:35},{name:"–õ–∂–∏–≤–∞—è –ê–ª–∞—è –†–æ–∑–∞",price:35},{name:"–ü–∞–∫ '–û—Ä—É–∂–∏–µ 1'",price:95},
        {name:"–û–±—Å–∏–¥–∏–∞–Ω–æ–≤—ã–π –Ω–æ–∂",price:35},{name:"–ë–æ–µ–≤–æ–π —Ç–æ–ø–æ—Ä",price:35},{name:"–ü—Ä–æ–∫–ª—è—Ç—ã–π –º—É—à–∫–µ—Ç–æ–Ω",price:35},
        {name:"–ü–∞–∫ '–û—Ä—É–∂–∏–µ 2'",price:95}
    ];

    let total = 0;

    function createGrid() {
        const grid = document.getElementById('mainGrid');
        items.forEach((item, i) => {
            const slot = document.createElement('div');
            slot.className = 'item-slot';
            slot.innerHTML = `
                <div class="item-image-container">
                    <div class="img-fallback">‚öî</div>
                    <img src="${item.name}.png" onerror="this.style.display='none'">
                </div>
                <div class="item-details">
                    <div class="item-title">${item.name}</div>
                    <div class="item-price">${item.price} –∫.</div>
                    <div class="item-input-group">
                        <input type="number" min="0" value="0" id="qty-${i}" oninput="update()">
                        <div class="subtotal-tag" id="sub-${i}">0</div>
                    </div>
                </div>`;
            grid.appendChild(slot);
        });
    }

    function update() {
        total = 0;
        items.forEach((item, i) => {
            const q = parseInt(document.getElementById(`qty-${i}`).value) || 0;
            const s = q * item.price;
            document.getElementById(`sub-${i}`).textContent = s;
            total += s;
        });
        document.getElementById('grandTotal').textContent = total;
        if (document.getElementById('orderModal').style.display === 'flex') updatePreview();
    }

    function resetAll() {
        items.forEach((_, i) => {
            document.getElementById(`qty-${i}`).value = 0;
            document.getElementById(`sub-${i}`).textContent = 0;
        });
        total = 0;
        document.getElementById('grandTotal').textContent = 0;
    }

    function getItemsList() {
        let list = "";
        items.forEach((item, i) => {
            const q = parseInt(document.getElementById(`qty-${i}`).value) || 0;
            if (q > 0) list += `üì¶ ${item.name} ‚Äî ${q} —à—Ç.\n`;
        });
        return list.trim() || "‚Äî";
    }

    function generateTemplate() {
        const method = document.getElementById('orderMethod').value;
        const note = document.getElementById('orderNote').value.trim() || "‚Äî";
        const list = getItemsList();

        return `–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è: ${method}
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: ${note}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
–¢–æ–≤–∞—Ä—ã:
${list}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: ${total} –∫—Ä–æ–ª—å`;
    }

    function updatePreview() {
        document.getElementById('itemsPreview').textContent = getItemsList();
        document.getElementById('totalPreview').textContent = `–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: ${total} –∫—Ä–æ–ª—å`;
    }

    function openModal() {
        if (total === 0) return alert("–í—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–ª–∏!");
        updatePreview();
        document.getElementById('orderModal').style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('orderModal').style.display = 'none';
    }

    function copyTemplate() {
        navigator.clipboard.writeText(generateTemplate()).then(() => {
            alert("–®–∞–±–ª–æ–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!\n–ú–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –≤ —á–∞—Ç.");
            closeModal();
        }).catch(() => alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏."));
    }

    createGrid();
</script>
</body>
</html>
